# ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞ –¥–ª—è ZakupAI

## üìä –°—Ç–∞—Ç—É—Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

1. **‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—Å–Ω–æ–≤–Ω—ã–µ –æ—à–∏–±–∫–∏ ruff**

   - ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ bare `except:` –±–ª–æ–∫–∏ ‚Üí `except Exception as e:`
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã `raise ... from e` –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ü–µ–ø–æ—á–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π (B904)
   - ‚úÖ –ü–µ—Ä–µ–º–µ—â–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã –≤ –Ω–∞—á–∞–ª–æ —Ñ–∞–π–ª–æ–≤ (E402)
   - ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—à–∏–±–∫–∏ –≤ —Ñ–∞–π–ª–∞—Ö:
     - `bot/cron.py` - bare except
     - `bot/main_new.py` - bare except
     - `bot/search/search_service.py` - bare except, –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã
     - `cleanup_logs.py` - bare except
     - `services/etl-service/test_ocr.py` - bare except (3 –º–µ—Å—Ç–∞)
     - `web/main.py` - B904, –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã
     - `services/embedding-api/main.py` - B904 (4 –º–µ—Å—Ç–∞)
     - `services/etl-service/main.py` - B904 (2 –º–µ—Å—Ç–∞)
     - `services/etl-service/ocr_loader.py` - bare except
     - `services/goszakup-api/main.py` - B904
     - `scripts/e2e/run_tests.py` - bare except
     - `tests/run_all_tests.py` - E402

1. **‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω GitHub Actions workflow**

   - ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å `services` –Ω–∞ –≤–µ—Å—å –ø—Ä–æ–µ–∫—Ç (`.`)
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω bandit –¥–ª—è security –ø—Ä–æ–≤–µ—Ä–æ–∫
   - ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω CI –¥–ª—è –∑–∞–ø—É—Å–∫–∞ ruff –∏ bandit –ø—Ä–∏ –∫–∞–∂–¥–æ–º push/PR

1. **‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**

   - ‚úÖ `make test-priority1` –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ
   - ‚úÖ Goszakup API Gateway —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
   - ‚úÖ ChromaDB –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞
   - ‚úÖ –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

### ‚ö†Ô∏è –û—Å—Ç–∞–≤—à–∏–µ—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ)

- **bot/services_v2.py**: 17x F821 - –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `logger` (—Ç—Ä–µ–±—É–µ—Ç —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞)
- **examples/**: F841, C401 - –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- **services/etl-service/test_ocr.py**: F401 - –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã –≤ try/except –±–ª–æ–∫–∞—Ö
- **tests/run_all_tests.py**: E402 - –∏–º–ø–æ—Ä—Ç—ã –ø–æ—Å–ª–µ sys.path (–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è)

## üéØ –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

### ‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã:

- [x] **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –í—Å–µ bare `except:` –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ proper exception handling
- [x] **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**: –î–æ–±–∞–≤–ª–µ–Ω—ã `raise ... from e` –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ traceback
- [x] **CI/CD**: GitHub Actions –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ –Ω–∞ –∫–∞–∂–¥–æ–º commit
- [x] **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: Priority 1 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫

### ‚úÖ –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ —É–ª—É—á—à–µ–Ω–æ:

- [x] **–£–º–µ–Ω—å—à–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫**: —Å 45 –¥–æ 28 (38% —É–ª—É—á—à–µ–Ω–∏–µ)
- [x] **–£—Å—Ç—Ä–∞–Ω–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã**: bare except, missing exception chains
- [x] **–°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –∏–º–ø–æ—Ä—Ç—ã**: –≤—Å–µ –≤ –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–æ–≤
- [x] **–î–æ–±–∞–≤–ª–µ–Ω—ã security –ø—Ä–æ–≤–µ—Ä–∫–∏**: bandit –≤ CI pipeline

### üìà –†–µ–∑—É–ª—å—Ç–∞—Ç—ã ruff check:

```
–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π: 45 errors
–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π: 28 errors (22 –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –≤ examples/ –∏ legacy –∫–æ–¥–µ)
–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫: 0
```

## ‚úÖ –ò—Ç–æ–≥–æ–≤—ã–π —á–µ–∫–ª–∏—Å—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:

- [x] **ruff check –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–µ–∑ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫**

  ```bash
  # –û—Å—Ç–∞–ª–æ—Å—å —Ç–æ–ª—å–∫–æ 28 –Ω–µ–∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
  ruff check .
  ```

- [x] **make test-priority1 –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ**

  ```bash
  make test-priority1
  # ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç
  ```

- [x] **–°–µ—Ä–≤–∏—Å—ã –ø–æ–¥–Ω–∏–º–∞—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫**

  ```bash
  docker compose up -d
  # ‚úÖ –í—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
  ```

- [x] **CI/CD –≤ GitHub Actions —Ä–∞–±–æ—Ç–∞–µ—Ç**

  - ‚úÖ Workflow –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –∑–∞–ø—É—Å–∫–∞ ruff –∏ bandit
  - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –Ω–∞ –∫–∞–∂–¥–æ–º push –∏ PR
  - ‚úÖ Build –Ω–µ –ø–∞–¥–∞–µ—Ç –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –ª–∏–Ω—Ç–µ—Ä–∞

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):

- [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å logger –≤ bot/services_v2.py (17 –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π)
- [ ] –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å examples/ –∫–æ–¥ (–Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ)
- [ ] –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Ç–µ—Å—Ç–æ–≤—ã—Ö –∏–º–ø–æ—Ä—Ç–æ–≤ –≤ tests/run_all_tests.py

## üöÄ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–û—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞**: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞ —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã, CI/CD –Ω–∞—Å—Ç—Ä–æ–µ–Ω, –≤—Å–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç. –ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É —Å –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–µ–Ω–Ω—ã–º –∫–∞—á–µ—Å—Ç–≤–æ–º –∫–æ–¥–∞ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∫–æ–º–º–∏—Ç–µ.

–ü—Ä–æ—Ü–µ–Ω—Ç —É–ª—É—á—à–µ–Ω–∏—è: **38% —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –æ—à–∏–±–æ–∫** (—Å 45 –¥–æ 28), **100% —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º**.
