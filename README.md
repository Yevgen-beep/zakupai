[![CI](https://github.com/Yevgen-beep/zakupai/actions/workflows/ci.yml/badge.svg)](https://github.com/Yevgen-beep/zakupai/actions/workflows/ci.yml)

# ZakupAI

MVP-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –≥–æ—Å–∑–∞–∫—É–ø–æ–∫ –†–ö.
ZakupAI –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–µ–Ω–¥–µ—Ä—ã, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫—Ä–∞—Ç–∫–∏–µ TL;DR, –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Ä–∏—Å–∫–∏ –∏ –º–∞—Ä–∂–∏–Ω–∞–ª—å–Ω–æ—Å—Ç—å, —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏ –∂–∞–ª–æ–±—ã, –∞ —Ç–∞–∫–∂–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å n8n, Flowise –∏ Telegram-–±–æ—Ç–æ–º –¥–ª—è –±–∏–∑–Ω–µ—Å–∞.

______________________________________________________________________

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞–∑–±–æ—Ä —Ç–µ–Ω–¥–µ—Ä–æ–≤ (TL;DR, —Ä–∏—Å–∫-—Å–∫–æ—Ä–∏–Ω–≥, –º–∞—Ä–∂–∞, –ù–î–°, —à—Ç—Ä–∞—Ñ—ã)
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤: –ø–∏—Å—å–º–∞, –∂–∞–ª–æ–±—ã, –æ—Ç—á—ë—Ç—ã (PDF/HTML)
- Telegram-–±–æ—Ç @TenderFinderBot_bot –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ú–°–ë
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏: Flowise (–≤–∏–∑—É–∞–ª—å–Ω—ã–µ AI-–≤–æ—Ä–∫—Ñ–ª–æ—É), n8n (–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤)
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤ –∏ ¬´–≥–æ—Ä—è—á–∏–µ –ª–æ—Ç—ã¬ª (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ cron)
- –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –≤—ã–≥–æ–¥–Ω–æ—Å—Ç–∏ —É—á–∞—Å—Ç–∏—è

______________________________________________________________________

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

ZakupAI –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ (FastAPI + Docker).

### –û—Å–Ω–æ–≤–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã

- **API Gateway** (`http://localhost:8080`) ‚Äî –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è, rate limits, X-API-Key
- **Billing Service** (`:7004`) ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, API –∫–ª—é—á–∏, –ª–∏–º–∏—Ç—ã, –ø–æ–¥–ø–∏—Å–∫–∏
- **Calc Service** (`:7001`) ‚Äî —Ä–∞—Å—á—ë—Ç—ã (–ù–î–°, –º–∞—Ä–∂–∞, —à—Ç—Ä–∞—Ñ—ã)
- **Risk Engine** (`:7002`) ‚Äî —Ä–∏—Å–∫-—Å–∫–æ—Ä–∏–Ω–≥ –∏ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è
- **Doc Service** (`:7003`) ‚Äî TL;DR, –ø–∏—Å—å–º–∞, PDF-—ç–∫—Å–ø–æ—Ä—Ç, –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è (ru/kz/en)
- **Embedding API** (`:7010`) ‚Äî –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, –ø–æ–∏—Å–∫, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Ollama

### –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

- **PostgreSQL** (`:5432`) ‚Äî –ª–æ—Ç—ã, —Ü–µ–Ω—ã, —Ä–∏—Å–∫–∏, —Ñ–∏–Ω—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã + billing —Å—Ö–µ–º–∞ (users, api_keys, usage, payments)
- **ChromaDB** (`:8000`) ‚Äî –≤–µ–∫—Ç–æ—Ä–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è –ø–æ–∏—Å–∫–∞

### –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

- **Telegram Bot** (@TenderFinderBot_bot)
  - `/start` ‚Äî –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ + —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
  - `/key <API_KEY>` ‚Äî –ø—Ä–∏–≤—è–∑–∫–∞ –∫–ª—é—á–∞
  - `/lot <id|url>` ‚Äî –ø–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ª–æ—Ç–∞
  - `/help` ‚Äî —Å–ø—Ä–∞–≤–∫–∞
- **Web UI** (`http://localhost:8082`) ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä –ª–æ—Ç–æ–≤, –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∞–π—Å–æ–≤ (CSV/XLSX)
- **Flowise** (`http://localhost:3000`) ‚Äî AI-–≤–æ—Ä–∫—Ñ–ª–æ—É (lot-reader, risk-explain, finance-calc, template-gen)
- **n8n** (`http://localhost:5678`) ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∏ –ø–∞–π–ø–ª–∞–π–Ω—ã

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ DevOps

- **Prometheus** (`http://localhost:9090`) ‚Äî –º–µ—Ç—Ä–∏–∫–∏
- **Grafana** (`http://localhost:3001`) ‚Äî –¥–∞—à–±–æ—Ä–¥—ã
- **Alertmanager** (`http://localhost:9093`) ‚Äî –∞–ª–µ—Ä—Ç—ã
- **cAdvisor** (`http://localhost:8081`) ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
- **Node Exporter** (`:9100`) –∏ **BlackBox Exporter** (`:9115`) ‚Äî –º–µ—Ç—Ä–∏–∫–∏ —Ö–æ—Å—Ç–∞ –∏ HTTP
- –ê–≤—Ç–æ–±—ç–∫–∞–ø—ã PostgreSQL (pg_dump + rclone ‚Üí B2/S3)
- CI/CD (lint, build, smoke-—Ç–µ—Å—Ç—ã)

### AI –∏ Ollama

- **Ollama (host)** (`http://localhost:11434`)
- –ú–æ–¥–µ–ª–∏: `qwen3`, `llama3`, `mistral`, `deepseek-r1`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ –∏ LLM-–æ–±—Ä–∞–±–æ—Ç–∫–∏

______________________________________________________________________

### üîó –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö

```mermaid
flowchart LR
    TG[Telegram Bot] -->|/key /lot|
    B[Billing Service]
    W[Web UI] --> B
    F[‚ö° Flowise] --> B
    N[n8n Workflows] --> B

    B --> G[API Gateway]

    G --> C[Calc Service]
    G --> R[Risk Engine]
    G --> D[Doc Service]
    G --> E[Embedding API]

    E --> O[Ollama (host)]
    G --> DB[(PostgreSQL)]
    E --> CH[(ChromaDB)]

üîë Billing Service
MVP (Stage)
PostgreSQL (—Å—Ö–µ–º–∞ billing):
users ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
api_keys ‚Äî API-–∫–ª—é—á–∏ –∏ –ø–ª–∞–Ω—ã
usage ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
payments ‚Äî –æ–ø–ª–∞—Ç—ã –∏ –ø–æ–¥–ø–∏—Å–∫–∏

FastAPI endpoints:
POST /billing/create_key ‚Äî —Å–æ–∑–¥–∞—Ç—å API-–∫–ª—é—á (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ /start)
POST /billing/validate_key ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–ª—é—á–∞ + –ø—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤
POST /billing/usage ‚Äî –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
GET /billing/stats/{tg_id} ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

–°–∏—Å—Ç–µ–º–∞ –ª–∏–º–∏—Ç–æ–≤:
Free: 100 –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å, 20/—á–∞—Å
Premium: 5000 –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å, 500/—á–∞—Å
Docker: —Å–µ—Ä–≤–∏—Å —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ :7004, –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ –æ–±—â–∏–π docker-compose

–¢–∞—Ä–∏—Ñ—ã
–ü–ª–∞–Ω	                –õ–∏–º–∏—Ç –≤ –¥–µ–Ω—å	   –õ–∏–º–∏—Ç –≤ —á–∞—Å	        –¶–µ–Ω–∞
Free	                    100	              20	            0 ‚Ç∏
Premium	                  5000	            500	            10 000 ‚Ç∏


–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
Telegram Bot: –≤—ã–¥–∞—ë—Ç –∫–ª—é—á–∏ –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏—Ö –ø–µ—Ä–µ–¥ –∞–Ω–∞–ª–∏–∑–æ–º –ª–æ—Ç–∞
Gateway: –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–ª—é—á–∏ –ø–µ—Ä–µ–¥ –¥–æ—Å—Ç—É–ø–æ–º –∫ API
–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã ZakupAI: —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ Billing –≤–∞–ª–∏–¥–∞—Ü–∏—é

–°–≤–æ–¥–∫–∞ –ø–æ –ø–æ—Ä—Ç–∞–º
Gateway ‚Äî http://localhost:8080
Web UI ‚Äî http://localhost:8082
Telegram Bot ‚Äî @TenderFinderBot_bot
Flowise ‚Äî http://localhost:3000
n8n ‚Äî http://localhost:5678
Postgres ‚Äî :5432
ChromaDB ‚Äî :8000
Calc Service ‚Äî :7001
Risk Engine ‚Äî :7002
Doc Service ‚Äî :7003
Billing Service ‚Äî :7004
Embedding API ‚Äî :7010
Ollama (host) ‚Äî http://localhost:11434
Prometheus ‚Äî http://localhost:9090
Grafana ‚Äî http://localhost:3001
Alertmanager ‚Äî http://localhost:9093
cAdvisor ‚Äî http://localhost:8081
Node Exporter ‚Äî http://localhost:9100
BlackBox Exporter ‚Äî http://localhost:9115

Security & DevOps
Rate limits: 60 req/min (Nginx Gateway)
X-API-Key –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
CORS/CSRF –ø–æ–ª–∏—Ç–∏–∫–∞: dev ‚Äî –æ—Ç–∫—Ä—ã—Ç–∞—è, stage ‚Äî –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è, prod ‚Äî —Å—Ç—Ä–æ–≥–∞—è
–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (FastAPI deps)
Pre-commit —Ö—É–∫–∏: ruff, black, isort, yamllint, mdformat
SAST (Bandit) –≤ CI
–ê–≤—Ç–æ–±—ç–∫–∞–ø—ã PostgreSQL (pg_dump + rclone ‚Üí B2/S3)

–ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è
Freemium ‚Üí Premium –ø–æ–¥–ø–∏—Å–∫–∞ (10 000 ‚Ç∏/–º–µ—Å)
–ü–∞–∫–µ—Ç—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (3 000‚Äì10 000 ‚Ç∏ –∑–∞ –∫–æ–º–ø–ª–µ–∫—Ç)
AI-–æ—Ç—á—ë—Ç—ã PDF –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ç–µ–Ω–¥–µ—Ä–æ–≤
White Label –¥–ª—è —é—Ä–∏—Å—Ç–æ–≤ –∏ –∫–æ–Ω—Å–∞–ª—Ç–∏–Ω–≥–æ–≤—ã—Ö –∫–æ–º–ø–∞–Ω–∏–π

–í–∏–¥—ã –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (–û–ö–≠–î)
62.01.1 ‚Äî –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ü–û –∏ SaaS (–æ—Å–Ω–æ–≤–Ω–æ–π)
62.01.2 ‚Äî –ò–¢-–∫–æ–Ω—Å–∞–ª—Ç–∏–Ω–≥, –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –ò–ò
63.11.1 ‚Äî –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö, API —Å–µ—Ä–≤–∏—Å—ã
62.03.0 ‚Äî MLOps –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
62.09.0 ‚Äî –ò–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω—ã–µ IT-—Ä–µ—à–µ–Ω–∏—è

–ò—Ç–æ–≥

ZakupAI ‚Äî —ç—Ç–æ –≥–æ—Ç–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
–ë—ç–∫–µ–Ω–¥ —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ç–µ–Ω–¥–µ—Ä–æ–≤
–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ n8n –∏ Flowise
–ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (Telegram Bot, Web UI)
–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π Billing Service (MVP)
AI-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ Ollama –∏ Embedding API
–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –±—ç–∫–∞–ø—ã –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω-–≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
```
