# ZakupAI Documentation

–ü–æ–ª–Ω–∞—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã ZakupAI –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞–∫—É–ø–æ–∫ –†–ö.

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

### üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- **[architecture.md](architecture.md)** - –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã, –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã, –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **[billing-service.md](billing-service.md)** - –°–µ—Ä–≤–∏—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, API –∫–ª—é—á–∞–º–∏ –∏ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏

### üîß –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

- **[telegram-bot-billing-integration.md](telegram-bot-billing-integration.md)** - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Telegram –±–æ—Ç–∞ —Å Billing Service
- **[n8n-flowise-integration.md](n8n-flowise-integration.md)** - AI-–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ n8n –∏ Flowise

### üöÄ DevOps –∏ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—è

- **[deployment.md](deployment.md)** - –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ dev/stage/prod –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö
- **[devops-monitoring.md](devops-monitoring.md)** - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, –º–µ—Ç—Ä–∏–∫–∏, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –∞–ª–µ—Ä—Ç—ã

### üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **[security.md](security.md)** - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, –≤–∞–ª–∏–¥–∞—Ü–∏—è, CORS, SAST, –∑–∞—â–∏—Ç–∞ –æ—Ç –∞—Ç–∞–∫

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### Development

```bash
# –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/your-org/zakupai.git
cd zakupai

# –ó–∞–ø—É—Å–∫–∞–µ–º dev –æ–∫—Ä—É–∂–µ–Ω–∏–µ
make dev

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
make health-check
make smoke-all
```

### Production

```bash
# –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º production –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
cp .env.prod .env

# –ó–∞–ø—É—Å–∫–∞–µ–º —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º
make prod

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–µ–ø–ª–æ–π–º–µ–Ω—Ç
make health-check
```

## üìä –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç           | –ü–æ—Ä—Ç  | –û–ø–∏—Å–∞–Ω–∏–µ                              | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è                                     |
| ------------------- | ----- | ------------------------------------- | ------------------------------------------------ |
| **API Gateway**     | :8080 | Nginx reverse proxy —Å rate limiting   | [architecture.md](architecture.md#api-gateway)   |
| **Billing Service** | :7004 | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –ª–∏–º–∏—Ç–∞–º–∏  | [billing-service.md](billing-service.md)         |
| **Calc Service**    | :7001 | –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ä–∞—Å—á–µ—Ç—ã (–ù–î–°, –º–∞—Ä–∂–∞, –ø–µ–Ω–∏) | [architecture.md](architecture.md#calc-service)  |
| **Risk Engine**     | :7002 | –†–∏—Å–∫-—Å–∫–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏–∑ —Ç–µ–Ω–¥–µ—Ä–æ–≤        | [architecture.md](architecture.md#risk-engine)   |
| **Doc Service**     | :7003 | TL;DR, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, PDF      | [architecture.md](architecture.md#doc-service)   |
| **Embedding API**   | :7010 | –í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –ø–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤       | [architecture.md](architecture.md#embedding-api) |

## ü§ñ AI –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

| –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç       | URL                  | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                           | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è                                                                  |
| ---------------- | -------------------- | ------------------------------------ | ----------------------------------------------------------------------------- |
| **Telegram Bot** | @TenderFinderBot_bot | –û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | [telegram-bot-billing-integration.md](telegram-bot-billing-integration.md)    |
| **Flowise**      | :3000                | –í–∏–∑—É–∞–ª—å–Ω—ã–µ AI-–≤–æ—Ä–∫—Ñ–ª–æ—É               | [n8n-flowise-integration.md](n8n-flowise-integration.md#flowise-custom-tools) |
| **n8n**          | :5678                | –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤       | [n8n-flowise-integration.md](n8n-flowise-integration.md#n8n-custom-nodes)     |
| **Web UI**       | :8082                | –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∞–π—Å–æ–≤      | [architecture.md](architecture.md#web-ui)                                     |

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏

| –°–µ—Ä–≤–∏—Å           | URL   | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ              | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è                                              |
| ---------------- | ----- | ----------------------- | --------------------------------------------------------- |
| **Prometheus**   | :9090 | –°–±–æ—Ä –º–µ—Ç—Ä–∏–∫             | [devops-monitoring.md](devops-monitoring.md#prometheus)   |
| **Grafana**      | :3001 | –î–∞—à–±–æ—Ä–¥—ã –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è | [devops-monitoring.md](devops-monitoring.md#grafana)      |
| **Alertmanager** | :9093 | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–ª–µ—Ä—Ç–∞–º–∏     | [devops-monitoring.md](devops-monitoring.md#alertmanager) |

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

- **X-API-Key –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** –¥–ª—è –≤—Å–µ—Ö API –∑–∞–ø—Ä–æ—Å–æ–≤
- **Billing Service –≤–∞–ª–∏–¥–∞—Ü–∏—è** —Å –∫–æ–Ω—Ç—Ä–æ–ª–µ–º –ª–∏–º–∏—Ç–æ–≤ Free/Premium
- **Rate limiting** –Ω–∞ —É—Ä–æ–≤–Ω–µ Nginx Gateway
- **Input validation** —á–µ—Ä–µ–∑ Pydantic –º–æ–¥–µ–ª–∏
- **SAST —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤ CI/CD –ø–∞–π–ø–ª–∞–π–Ω–µ

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [security.md](security.md)

## üí∞ –ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è –∏ —Ç–∞—Ä–∏—Ñ—ã

| –ü–ª–∞–Ω        | –ó–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å | –ó–∞–ø—Ä–æ—Å–æ–≤/—á–∞—Å | –°—Ç–æ–∏–º–æ—Å—Ç—å    | –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏                                     |
| ----------- | ------------- | ------------ | ------------ | ----------------------------------------------- |
| **Free**    | 100           | 20           | 0 ‚Ç∏          | –ë–∞–∑–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑ —Ç–µ–Ω–¥–µ—Ä–æ–≤                         |
| **Premium** | 5,000         | 500          | 10,000 ‚Ç∏/–º–µ—Å | PDF —ç–∫—Å–ø–æ—Ä—Ç, —Ä–∏—Å–∫-—Å–∫–æ—Ä–∏–Ω–≥, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ |

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [billing-service.md](billing-service.md#%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0-%D0%BB%D0%B8%D0%BC%D0%B8%D1%82%D0%BE%D0%B2)

## üåç –û–∫—Ä—É–∂–µ–Ω–∏—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### Development

- Local Docker —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
- Debug –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- Hot reload –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- –ú–æ–∫–∏ –≤–Ω–µ—à–Ω–∏—Ö API

### Staging

- Production-like –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- –¢–µ—Å—Ç–æ–≤—ã–µ –ø–ª–∞—Ç–µ–∂–∏
- Monitoring –≤–∫–ª—é—á–µ–Ω
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Production

- Managed database (RDS)
- SSL/TLS —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
- –ü–æ–ª–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–µ–∫
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã
- Kaspi + Stripe –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [deployment.md](deployment.md#%D0%BE%D0%BA%D1%80%D1%83%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F)

## üõ† CI/CD Pipeline

### Automated Testing

```yaml
Test ‚Üí SAST Scan ‚Üí Build Images ‚Üí Smoke Tests ‚Üí Deploy
```

### Security Gates

- **Bandit** - SAST –¥–ª—è Python –∫–æ–¥–∞
- **Safety** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –Ω–∞ —É—è–∑–≤–∏–º–æ—Å—Ç–∏
- **Semgrep** - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π security –∞–Ω–∞–ª–∏–∑
- **Pre-commit hooks** - –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [deployment.md](deployment.md#cicd-pipeline)

## üìö API Reference

### –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

**Billing Service:**

```bash
POST /billing/create_key     # –°–æ–∑–¥–∞–Ω–∏–µ API –∫–ª—é—á–∞
POST /billing/validate_key   # –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–ª—é—á–∞ –∏ –ª–∏–º–∏—Ç–æ–≤
POST /billing/usage          # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
GET  /billing/stats/{tg_id}  # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

**Calc Service:**

```bash
POST /calc/vat      # –†–∞—Å—á–µ—Ç –ù–î–°
POST /calc/margin   # –ê–Ω–∞–ª–∏–∑ –º–∞—Ä–∂–∏–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
POST /calc/penalty  # –†–∞—Å—á–µ—Ç –ø–µ–Ω–∏ –∏ —à—Ç—Ä–∞—Ñ–æ–≤
```

**Risk Engine:**

```bash
POST /risk/score           # –†–∏—Å–∫-—Å–∫–æ—Ä–∏–Ω–≥ –ª–æ—Ç–∞
GET  /risk/explain/{id}    # –û–±—ä—è—Å–Ω–µ–Ω–∏–µ —Ä–∏—Å–∫–æ–≤
```

**Doc Service:**

```bash
POST /tldr                 # –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ª–æ—Ç–∞
POST /letters/generate     # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
POST /render/pdf          # PDF —ç–∫—Å–ø–æ—Ä—Ç
```

## üéØ Roadmap

### MVP (Completed) ‚úÖ

- –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- Billing Service —Å Free/Premium –ø–ª–∞–Ω–∞–º–∏
- Telegram bot –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- –ë–∞–∑–æ–≤—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –±—ç–∫–∞–ø—ã

### Production (In Progress) üöß

- Kaspi API + Stripe –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- –û—Ç–¥–µ–ª—å–Ω—ã–π Billing —Å–µ—Ä–≤–µ—Ä —Å –∏–∑–æ–ª—è—Ü–∏–µ–π
- Advanced –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã
- Performance –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### Future Enhancements üîÆ

- Machine Learning –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –≤—ã–∏–≥—Ä—ã—à–∞
- Blockchain –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –¥–ª—è audit trail
- Mobile –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- White Label —Ä–µ—à–µ–Ω–∏—è –¥–ª—è –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤

## ü§ù Contributing

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
zakupai/
‚îú‚îÄ‚îÄ services/           # –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ billing-service/
‚îÇ   ‚îú‚îÄ‚îÄ calc-service/
‚îÇ   ‚îú‚îÄ‚îÄ risk-engine/
‚îÇ   ‚îî‚îÄ‚îÄ doc-service/
‚îú‚îÄ‚îÄ bot/               # Telegram bot
‚îú‚îÄ‚îÄ web/               # Web UI
‚îú‚îÄ‚îÄ docs/              # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ monitoring/        # Prometheus, Grafana
‚îî‚îÄ‚îÄ scripts/           # –£—Ç–∏–ª–∏—Ç—ã —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
```

### Development –ø—Ä–æ—Ü–µ—Å—Å

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
1. –°–æ–∑–¥–∞–π—Ç–µ feature branch
1. –°–ª–µ–¥—É–π—Ç–µ code style (black, ruff, isort)
1. –î–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø—Ä–æ—Ö–æ–¥—è—Ç security –ø—Ä–æ–≤–µ—Ä–∫–∏
1. –°–æ–∑–¥–∞–π—Ç–µ Pull Request

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- **Technical Issues**: GitHub Issues
- **Security Issues**: security@zakupai.site
- **Business Inquiries**: hello@zakupai.site
- **Telegram Support**: @zakupai_support

______________________________________________________________________

**ZakupAI** - –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞–∫—É–ø–æ–∫ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ò–ò
¬© 2024 ZakupAI Team. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞: $(date +%Y-%m-%d)
