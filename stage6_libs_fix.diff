diff --git a/libs/Dockerfile b/libs/Dockerfile
new file mode 100644
index 0000000..6e7efc0
--- /dev/null
+++ b/libs/Dockerfile
@@ -0,0 +1,4 @@
+# syntax=docker/dockerfile:1.6
+
+FROM scratch AS libs
+COPY zakupai_common /zakupai_common
diff --git a/Makefile b/Makefile
index 060dc06..c8c0309 100644
--- a/Makefile
+++ b/Makefile
@@ -27,6 +27,7 @@ test: ## Test a specific service health: make test SERVICE=calc-service
 	fi
 
 stage6-up: ## Start Stage6 monitoring stack
+	docker compose -f docker-compose.yml build libs
 	docker compose --profile stage6 -f docker-compose.yml -f docker-compose.override.stage6.yml -f docker-compose.override.stage6.monitoring.yml up -d
 
 stage6-down: ## Stop Stage6 monitoring stack
diff --git a/docker-compose.override.stage6.yml b/docker-compose.override.stage6.yml
index 300790d..7d20ccf 100644
--- a/docker-compose.override.stage6.yml
+++ b/docker-compose.override.stage6.yml
@@ -44,8 +44,6 @@ services:
     build:
       context: ./services/doc-service
       dockerfile: Dockerfile
-      additional_contexts:
-        - libs=./libs
 
   chromadb:
     profiles: ["stage6"]
@@ -58,8 +56,6 @@ services:
     build:
       context: ./services/billing-service
       dockerfile: Dockerfile
-      additional_contexts:
-        - libs=./libs
     healthcheck:
       test: ["CMD", "curl", "-f", "http://localhost:8000/health"]
       interval: 10s
diff --git a/docker-compose.yml b/docker-compose.yml
index b913b4c..2cf743c 100644
--- a/docker-compose.yml
+++ b/docker-compose.yml
@@ -1,4 +1,11 @@
 services:
+  libs:
+    image: libs:latest
+    build:
+      context: ./libs
+    command: ["true"]
+    restart: "no"
+
   db:
     image: postgres:16
     container_name: zakupai-db
@@ -23,9 +30,6 @@ services:
   embedding-api:
     build:
       context: ./services/embedding-api
-      additional_contexts:
-        - libs=./libs
-        - common=./services/common
       args:
         - TAG=${TAG:-stage5}
     image: zakupai/embedding-api:${TAG:-stage5}
@@ -47,7 +51,6 @@ services:
     build:
       context: ./services/calc-service
       additional_contexts:
-        - libs=./libs
         - common=./services/common
       args:
         - TAG=${TAG:-stage5}
@@ -68,7 +71,6 @@ services:
     build:
       context: ./services/risk-engine
       additional_contexts:
-        - libs=./libs
         - common=./services/common
       args:
         - TAG=${TAG:-stage5}
@@ -93,8 +95,6 @@ services:
   doc-service:
     build:
       context: ./services/doc-service
-      additional_contexts:
-        - libs=./libs
     container_name: zakupai-doc-service
     ports:
       - "7003:8000"
@@ -127,8 +127,6 @@ services:
   goszakup-api:
     build:
       context: ./services/goszakup-api
-      additional_contexts:
-        - libs=./libs
     container_name: zakupai-goszakup-api
     ports:
       - "7005:8001"
@@ -156,7 +154,6 @@ services:
     build:
       context: ./services/etl-service
       additional_contexts:
-        - libs=./libs
         - common=./services/common
       args:
         - TAG=${TAG:-stage5}
@@ -180,7 +177,6 @@ services:
     build:
       context: ./services/gateway
       additional_contexts:
-        - libs=./libs
         - common=./services/common
       args:
         - TAG=${TAG:-stage5}
@@ -275,9 +271,6 @@ services:
   zakupai-bot:
     build:
       context: ./bot
-      additional_contexts:
-        - libs=./libs
-        - common=./services/common
       args:
         - TAG=${TAG:-stage5}
     image: zakupai/bot:${TAG:-stage5}
@@ -304,9 +297,6 @@ services:
   web-ui:
     build:
       context: ./web
-      additional_contexts:
-        - libs=./libs
-        - common=./services/common
       args:
         - TAG=${TAG:-stage5}
     image: zakupai/web-ui:${TAG:-stage5}
