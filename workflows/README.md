# ZakupAI Workflows

–ö–æ–ª–ª–µ–∫—Ü–∏—è —Ä–∞–±–æ—á–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–π ZakupAI.

## n8n Workflows

### 1. Lot Processing Pipeline (`lot-processing-pipeline.json`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ª–æ—Ç–æ–≤ —Å –∞–Ω–∞–ª–∏–∑–æ–º —Ä–∏—Å–∫–æ–≤ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏

**–¢—Ä–∏–≥–≥–µ—Ä**: Webhook `zakupai-lot-process`

**–§—É–Ω–∫—Ü–∏–∏**:

- –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ª–æ—Ç–∞ –∏–∑ Goszakup API
- –†–∞—Å—á–µ—Ç –º–∞—Ä–∂–∏ —á–µ—Ä–µ–∑ calc-service
- –û—Ü–µ–Ω–∫–∞ —Ä–∏—Å–∫–æ–≤ —á–µ—Ä–µ–∑ risk-engine
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ "–≥–æ—Ä—è—á–∏–π –ª–æ—Ç" (—Ä–∏—Å–∫ > 70% –∏–ª–∏ –º–∞—Ä–∂–∞ > 15%)
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è TL;DR —Å–≤–æ–¥–∫–∏
- –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ Telegram –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –≥–æ—Ä—è—á–∏—Ö –ª–æ—Ç–æ–≤
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ª–æ—Ç–∞

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞**:

```env
ZAKUPAI_API_KEY=your-api-key
TELEGRAM_HOT_LOTS_CHANNEL=@your_hot_lots_channel
```

### 2. Daily Lot Scanner (`daily-lot-scanner.json`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ï–∂–µ–¥–Ω–µ–≤–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –ª–æ—Ç–æ–≤

**–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ**: 9:00, 14:00, 18:00 (–ê–ª–º–∞—Ç—ã)

**–§—É–Ω–∫—Ü–∏–∏**:

- –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ª–æ—Ç–æ–≤ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞
- –ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ª–æ—Ç–æ–≤ (–ø–æ 5 —à—Ç—É–∫)
- –ê–≥—Ä–µ–≥–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–≤–æ–¥–∫–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –≥–æ—Ä—è—á–∏—Ö –ª–æ—Ç–∞—Ö

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞**:

```env
TELEGRAM_ADMIN_CHANNEL=@your_admin_channel
TELEGRAM_HOT_LOTS_CHANNEL=@your_hot_lots_channel
```

### 3. Price Monitor (`price-monitor.json`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ü–µ–Ω –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

**–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ**: 6:00, 12:00, 20:00 (–ê–ª–º–∞—Ç—ã)

**–§—É–Ω–∫—Ü–∏–∏**:

- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Ü–µ–Ω
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö (—Å—Ç–∞—Ä—à–µ 6 —á–∞—Å–æ–≤)
- –ü–µ—Ä–µ—Å—á–µ—Ç –º–∞—Ä–∂–∏ –¥–ª—è –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã—Ö –ª–æ—Ç–æ–≤
- –û—Ç—á–µ—Ç –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —Ü–µ–Ω–æ–≤—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

## Flowise Chatflow

### ZakupAI Assistant (`zakupai-assistant-chatflow.json`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∑–∞–∫—É–ø–∫–∞–º–∏

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**:

- üîç **Lot Reader**: –ü–æ–∏—Å–∫ –∏ –∞–Ω–∞–ª–∏–∑ –ª–æ—Ç–æ–≤ –ø–æ –Ω–æ–º–µ—Ä—É/URL
- ‚ö†Ô∏è **Risk Explain**: –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –æ—Ü–µ–Ω–∫–∏ —Ä–∏—Å–∫–æ–≤
- üí∞ **Finance Calc**: –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ä–∞—Å—á–µ—Ç—ã (–º–∞—Ä–∂–∞, –ù–î–°, —à—Ç—Ä–∞—Ñ—ã)
- üìÑ **Template Gen**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏ –ø–∏—Å–µ–º

**–ú–æ–¥–µ–ª—å**: GPT-4 (temperature: 0.3)
**–ü–∞–º—è—Ç—å**: Buffer Memory –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–∏–∞–ª–æ–≥–∞
**–Ø–∑—ã–∫**: –†—É—Å—Å–∫–∏–π

**–ü—Ä–∏–º–µ—Ä –¥–∏–∞–ª–æ–≥–∞**:

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –ª–æ—Ç 12345
–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç: *–∏—Å–ø–æ–ª—å–∑—É–µ—Ç lot_reader* ‚Üí *–∏—Å–ø–æ–ª—å–∑—É–µ—Ç risk_explain* ‚Üí *–∏—Å–ø–æ–ª—å–∑—É–µ—Ç finance_calc* ‚Üí –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞–Ω–∞–ª–∏–∑
```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### n8n

1. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ JSON —Ñ–∞–π–ª—ã —á–µ—Ä–µ–∑ n8n UI
1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ credentials:
   - `goszakup-credentials` - API –∫–ª—é—á–∏ Goszakup
   - `telegram-bot-credentials` - —Ç–æ–∫–µ–Ω Telegram –±–æ—Ç–∞
1. –°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—ã –≤ n8n
1. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ workflow

### Flowise

1. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ chatflow —á–µ—Ä–µ–∑ Flowise UI
1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ OpenAI credential
1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ ZakupAI API –∫–ª—é—á–∏ –¥–ª—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
1. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—ã

```env
# ZakupAI API
ZAKUPAI_API_KEY=your-zakupai-api-key

# Telegram
TELEGRAM_BOT_TOKEN=your-telegram-bot-token
TELEGRAM_HOT_LOTS_CHANNEL=@hot_lots_channel
TELEGRAM_ADMIN_CHANNEL=@admin_channel

# Goszakup API
GOSZAKUP_TOKEN=your-goszakup-token

# OpenAI (–¥–ª—è Flowise)
OPENAI_API_KEY=your-openai-key
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–í—Å–µ workflow –≤–∫–ª—é—á–∞—é—Ç:

- –û–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- –ú–µ—Ç—Ä–∏–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

## –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

Workflow –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É—é—Ç—Å—è —Å:

- Docker Compose –æ–∫—Ä—É–∂–µ–Ω–∏–µ–º ZakupAI
- –°–µ—Ç—å—é `zakupai_default`
- API Gateway –Ω–∞ –ø–æ—Ä—Ç—É 8080
- PostgreSQL –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å backup workflow
- –î–æ–±–∞–≤–∏—Ç—å monitoring alerting
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –≤–º–µ—Å—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å—Ä–µ–¥—ã
